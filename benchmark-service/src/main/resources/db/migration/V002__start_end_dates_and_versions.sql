BEGIN;

-- add timestamps
ALTER TABLE benchmark_runs ADD COLUMN started TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE benchmark_runs ALTER COLUMN started DROP DEFAULT;

ALTER TABLE executions ADD COLUMN started TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE executions ALTER COLUMN started DROP DEFAULT;

ALTER TABLE benchmark_runs ADD COLUMN ended TIMESTAMP;
UPDATE benchmark_runs SET ended = CURRENT_TIMESTAMP;

ALTER TABLE executions ADD COLUMN ended TIMESTAMP;
UPDATE executions SET ended = CURRENT_TIMESTAMP;

-- add version column
ALTER TABLE benchmark_runs ADD COLUMN version BIGINT NOT NULL DEFAULT 0;
ALTER TABLE benchmark_runs ALTER COLUMN version DROP DEFAULT;

ALTER TABLE executions ADD COLUMN version BIGINT NOT NULL DEFAULT 0;
ALTER TABLE executions ALTER COLUMN version DROP DEFAULT;

COMMIT;