<div class="row">
    <ol class="breadcrumb">
        <li><a href="#/">Home</a></li>
        <li class="active">{{benchmark.name}}</li>
    </ol>
</div>
<div class="row">
    <div class="col-sm-12">
        <h2 class="sub-header">Benchmark: {{benchmark.name}}</h2>
    </div>
    <div class="col-sm-12">
        <ul>
            <li>
                <strong>Environment:</strong>
                <a target="_blank" ng-href="#/environment/{{::benchmark.runs[0].environment.name}}">
                    {{::benchmark.runs[0].environment.name}}
                </a>
            </li>
            <li ng-repeat="(name, value) in benchmark.runs[0].attributes">
                <strong>{{name}}:</strong>
                {{value}}
            </li>
        </ul>
    </div>
</div>
<div class="row">
    <div class="col-sm-12 col-md-6 col-lg-4 text-center" ng-repeat="graphData in measurementGraphsData" class="measurementGraph">
        <strong>{{graphData.name}} in {{graphData.unit}}</strong>
    </div>
</div>
<div ng-if="benchmarkMeasurementGraphsData.length > 0" class="row">
    <div class="col-sm-12">
        <h3 class="sub-header">Benchmark graphs</h3>
    </div>
</div>
<div ng-if="benchmarkMeasurementGraphsData.length > 0" class="row">
    <div class="col-sm-12 col-md-6 col-lg-4 text-center" ng-repeat="graphData in benchmarkMeasurementGraphsData" class="measurementGraph">
        <strong>{{graphData.name}} in {{graphData.unit}}</strong>
        <canvas id="chart-{{graphData.name}}" class="chart chart-line" data="graphData.data" click="onBenchmarkClick"
                labels="graphData.labels" legend="false" series="graphData.series"
                options="{
                    bezierCurve: false,
                    scaleBeginAtZero: true,
                    scaleShowVerticalLines: false,
                    legendTemplate : '<ul class=\'<%=name.toLowerCase()%>-legend\'><% for (var i=0; i<datasets.length; i++){%><li><span style=\'background-color:<%=datasets[i].strokeColor%>\'></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
                }"
                colours="[
                {
                    fillColor: 'rgba(102, 178, 255, 0.4)',
                    strokeColor: 'rgba(102, 178, 255, 0.8)',
                    highlightFill: 'rgba(102, 178, 255, 0.8)',
                    highlightStroke: 'rgba(102, 178, 255, 0.8)'
                }
                ]">
        </canvas>
    </div>
</div>
<div ng-if="aggregatedExecutionsMeasurementGraphsData.length > 0" class="row">
    <div class="col-sm-12">
        <h3 class="sub-header">Query graphs</h3>
    </div>
</div>
<div ng-if="aggregatedExecutionsMeasurementGraphsData.length > 0" class="row">
    <div class="col-sm-12 col-md-6 col-lg-4 text-center" ng-repeat="graphData in aggregatedExecutionsMeasurementGraphsData" class="measurementGraph">
        <strong>{{graphData.name}} in {{graphData.unit}}</strong>
        <canvas id="chart-{{graphData.name}}" class="chart chart-line" data="graphData.data" click="onBenchmarkClick"
                labels="graphData.labels" legend="true" series="graphData.series"
                options="{
                    bezierCurve: false,
                    scaleBeginAtZero: true,
                    scaleShowVerticalLines: false,
                    legendTemplate : '<ul class=\'<%=name.toLowerCase()%>-legend\'><% for (var i=0; i<datasets.length; i++){%><li><span style=\'background-color:<%=datasets[i].strokeColor%>\'></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
                }"
                colours="[
                {
                    fillColor: 'rgba(102, 178, 255, 0.4)',
                    strokeColor: 'rgba(102, 178, 255, 0.8)',
                    highlightFill: 'rgba(102, 178, 255, 0.8)',
                    highlightStroke: 'rgba(102, 178, 255, 0.8)'
                },
                {
                    fillColor: 'rgba(47, 132, 71, 0.1)',
                    strokeColor: 'rgba(47, 132, 71, 0.8)',
                    highlightFill: 'rgba(47, 132, 71, 0.8)',
                    highlightStroke: 'rgba(47, 132, 71, 0.8)'
                },
                {
                    fillColor: 'rgba(255, 51, 51, 0.1)',
                    strokeColor: 'rgba(255, 51, 51, 0.8)',
                    highlightFill: 'rgba(255, 51, 51, 0.8)',
                    highlightStroke: 'rgba(255, 51, 51, 0.8)'
                },
                {
                    fillColor: 'rgba(64, 64, 64, 0.1)',
                    strokeColor: 'rgba(64, 64, 64, 0.8)',
                    highlightFill: 'rgba(64, 64, 64, 0.8)',
                    highlightStroke: 'rgba(64, 64, 64, 0.8)'
                }
                ]">
        </canvas>
    </div>
</div>

<div class="row">
    <div class="col-sm-12">
        <h3 class="sub-header">Runs</h3>

        <a ng-if="page > 0" ng-href="#/benchmark/{{benchmark.name}}?page={{ (1 * page - 1) | number:0 }}&size={{pageSize}}"><< Newer</a>
        <a ng-if="benchmark.runs > 0" ng-href="#/benchmark/{{benchmark.name}}?page={{ (1 * page + 1) | number:0 }}&size={{pageSize}}">Older >></a>

        <div class="table-responsive">
            <table class="table table-striped table-condensed">
                <thead>
                <tr>
                    <td>#</td>
                    <td>SequenceId</td>
                    <td>Status</td>
                    <td>Started</td>
                    <td>Duration</td>
                    <td>min / mean / max</td>
                </tr>
                </thead>
                <tr ng-repeat="benchmarkRun in benchmark.runs">
                    <td>{{::$index + 1}}</td>
                    <td><a ng-href="#/benchmark/{{benchmarkRun.name}}/{{benchmarkRun.sequenceId}}">{{benchmarkRun.sequenceId}}</a></td>
                    <td>
                        <span class="execution-status execution-status-{{::benchmarkRun.status}}">{{benchmarkRun.status}}</span>
                    </td>
                    <td>{{benchmarkRun.started | date : 'yyyy-MM-dd HH:mm:ss'}}</td>
                    <td>{{benchmarkRun.ended ? ((benchmarkRun.ended - benchmarkRun.started) | duration) : 'Not finished'}}</td>
                    <td ng-init="duration=benchmarkRun.aggregatedMeasurements.duration">
                        <span ng-if="::benchmarkRun.status=='ENDED'">
                            {{duration.min | duration}} / {{duration.mean | duration}} / {{duration.max | duration}}
                        </span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
